<!DOCTYPE html>
<html lang="ko" 
    xmlns:th="http://www.thymeleaf.org" 
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/include-timetable}">
    
		<section layout:fragment="contents" class="contents d-flex mt-4">
			<aside class="side-menu col-2">
				<select id="timetableSelect">
					<option selected>시간표 선택</option>
				    <th:block th:each="timetable:${tableList}">
				        <option th:value="${timetable.timetableId}" th:text="${timetable.timetableName}"></option>
				    </th:block>
				</select>
				<div class="timetable-info border border-dark mt-3 d-flex align-items-center p-2">
					<div>
						<div id="timetable">시간표 이름</div>
						<div class="mt-3">18학점</div>
					</div>
				</div>
				<button type="button" class="btn btn-block btn-dark mt-3" onclick = "location.href='/timetable/input-view'">+새 시간표 만들기</button>
				<button type="button" class="btn btn-block btn-dark" onclick = "location.href='#'">시간표 수정</button>
				<button type="button" class="btn btn-block btn-dark" id="deleteBtn">시간표 삭제</button>
			</aside>
			<div class="main-contents col-10 d-flex justify-content-center">
				<table id="time-table">
					<thead>
						<tr>
							<th></th>
							<th>월</th>
							<th>화</th>
							<th>수</th>
							<th>목</th>
							<th>금</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<th>1교시</th>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '09:00' || lecture.endTime == '10:30') && lecture.day == '월'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '09:00' || lecture.endTime == '10:30') && lecture.day == '화'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '09:00' || lecture.endTime == '10:30') && lecture.day == '수'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '09:00' || lecture.endTime == '10:30') && lecture.day == '목'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '09:00' || lecture.endTime == '10:30') && lecture.day == '금'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
						</tr>
						<tr>
							<th>2교시</th>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '10:30' || lecture.endTime == '12:00') && lecture.day == '월'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '10:30' || lecture.endTime == '12:00') && lecture.day == '화'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '10:30' || lecture.endTime == '12:00') && lecture.day == '수'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '10:30' || lecture.endTime == '12:00') && lecture.day == '목'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '10:30' || lecture.endTime == '12:00') && lecture.day == '금'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
									</th:block>
								</th:block>
							</td>
						</tr>
						<tr>
							<th>3교시</th>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '12:00' || lecture.endTime == '13:30') && lecture.day == '월'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '12:00' || lecture.endTime == '13:30') && lecture.day == '화'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '12:00' || lecture.endTime == '13:30') && lecture.day == '수'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '12:00' || lecture.endTime == '13:30') && lecture.day == '목'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '12:00' || lecture.endTime == '13:30') && lecture.day == '금'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
						</tr>
						<tr>
							<th>4교시</th>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '13:30' || lecture.endTime == '15:00') && lecture.day == '월'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '13:30' || lecture.endTime == '15:00') && lecture.day == '화'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '13:30' || lecture.endTime == '15:00') && lecture.day == '수'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '13:30' || lecture.endTime == '15:00') && lecture.day == '목'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '13:30' || lecture.endTime == '15:00') && lecture.day == '금'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
						</tr>
						<tr>
							<th>5교시</th>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '15:00' || lecture.endTime == '16:30') && lecture.day == '월'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '15:00' || lecture.endTime == '16:30') && lecture.day == '화'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '15:00' || lecture.endTime == '16:30') && lecture.day == '수'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '15:00' || lecture.endTime == '16:30') && lecture.day == '목'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '15:00' || lecture.endTime == '16:30') && lecture.day == '금'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
						</tr>
						<tr>
							<th>6교시</th>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '16:30' || lecture.endTime == '18:00') && lecture.day == '월'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '16:30' || lecture.endTime == '18:00') && lecture.day == '화'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '16:30' || lecture.endTime == '18:00') && lecture.day == '수'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '16:30' || lecture.endTime == '18:00') && lecture.day == '목'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '16:30' || lecture.endTime == '18:00') && lecture.day == '금'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
						</tr>
						<tr>
							<th>7교시</th>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '18:00' || lecture.endTime == '19:30') && lecture.day == '월'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '12:00' || lecture.endTime == '13:30') && lecture.day == '화'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '18:00' || lecture.endTime == '19:30') && lecture.day == '수'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '18:00' || lecture.endTime == '19:30') && lecture.day == '목'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
							<td>
								<th:block th:each="table:${tableList}">
									<th:block th:each="lecture:${table.lectureList}">
										<th:block th:if="${(lecture.startTime == '18:00' || lecture.endTime == '19:30') && lecture.day == '금'}">
											<b th:utext="${lecture.lectureName}"></b>
											<div class="d-flex small-text">
												<b th:text="${lecture.professorName}" class="mr-2"></b>
												<div th:text="${lecture.classRoom}"></div>
											</div>
										</th:block>
									</th:block>
								</th:block>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</section>
	<script layout:fragment="script">
		$(document).ready(function() {
			$("#timetableSelect").on("click", function() {
				let timetable = $("#timetableSelect option:selected").text();
				
				$("#timetable").text(timetable);
			});
			
			$("#deleteBtn").on("click", function() {
				let id = $("#timetableSelect option:selected").val();
				
				$.ajax({
					type:"delete"
					, url:"/timetable/delete"
					, data:{"id":id}
					, success:function(response) {
						if(response.result == "success") {
							location.href="/timetable/detail-view";
						} else {
							alert("삭제 실패!");
						}
					}
					, error:function() {
						alert("삭제 에러!");
					}
				});
			});
		});
	</script>
</body>
</html>