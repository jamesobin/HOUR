<!DOCTYPE html>
<html lang="ko" 
    xmlns:th="http://www.thymeleaf.org" 
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/default}">
    
		<section layout:fragment="contents" class="contents d-flex mt-4">
			<aside class="side-menu col-2">
				<select id="timetableSelect">
					<option selected>시간표 선택</option>
				    <th:block th:each="timetable:${tableList}">
				        <option th:value="${timetable.timetableId}" th:text="${timetable.timetableName}"></option>
				    </th:block>
				</select>
				<div class="timetable-info border border-dark mt-3 d-flex align-items-center p-2">
					<div>
						<div id="timetable">시간표 이름</div>
						<div class="mt-3">18학점</div>
					</div>
				</div>
				<button type="button" class="btn btn-block btn-dark mt-3" onclick = "location.href='/timetable/input-view'">+새 시간표 만들기</button>
				<button type="button" class="btn btn-block btn-dark" onclick = "location.href='#'">시간표 수정</button>
				<button type="button" class="btn btn-block btn-dark" id="deleteBtn">시간표 삭제</button>
			</aside>
			<div class="main-contents col-10">
				<table border="1" width="1300px">
					<thead>
						<tr>
							<th width="100px"></th>
							<th>월</th>
							<th>화</th>
							<th>수</th>
							<th>목</th>
							<th>금</th>
						</tr>
					</thead>
					<tbody height="640px">
						<tr>
							<th>1교시</th>
							<td class="table-primary">
								<div>
									<div>주제연구</div>
									<div class="d-flex">
										<div>오승희</div>
										<div>우정원B109</div>
									</div>
								</div>
							</td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<th>2교시</th>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<th>3교시</th>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<th>4교시</th>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<th>5교시</th>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<th>6교시</th>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<th>7교시</th>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
						<tr>
							<th>8교시</th>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
					</tbody>
				</table>
				<table class="table">
					<thead>
						<tr>
							<th>강의명</th>
							<th>교수명</th>
							<th>강의실</th>
							<th>학기</th>
							<th>수업 시작 시간</th>
							<th>수업 종료 시간</th>
						</tr>
					</thead>
					<tbody>
						<th:block th:each="table:${tableList}">
							<tr th:each="lecture:${table.lectureList}">
								<td th:text="${lecture.lectureName}">건축공학개론</td>
								<td th:text="${lecture.professorName}">홍원기</td>
								<td th:text="${lecture.classRoom}">공176</td>
								<td th:text="${table.timetableId}">2018년도 1학기</td>
								<td th:text="${lecture.startTime}">10:30</td>
								<td th:text="${lecture.endTime}">12:00</td>
							</tr>
						</th:block>
					</tbody>
				</table>
			</div>
		</section>
	<script layout:fragment="script">
		$(document).ready(function() {
			$("#timetableSelect").on("click", function() {
				let timetable = $("#timetableSelect option:selected").text();
				
				$("#timetable").text(timetable);
			});
			
			$("#deleteBtn").on("click", function() {
				let id = $("#timetableSelect option:selected").val();
				
				$.ajax({
					type:"delete"
					, url:"/timetable/delete"
					, data:{"id":id}
					, success:function(response) {
						if(response.result == "success") {
							location.href="/timetable/detail-view";
						} else {
							alert("삭제 실패!");
						}
					}
					, error:function() {
						alert("삭제 에러!");
					}
				});
			});
		});
	</script>
</body>
</html>